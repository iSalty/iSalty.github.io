<!DOCTYPE html>
<html>
<head>
	<title>Ian's EE Blog</title>
  	<meta charset="utf-8" />
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  	<link href='https://fonts.googleapis.com/css?family=Roboto|Ubuntu' rel='stylesheet' type='text/css'>
  	<link rel="stylesheet" type="text/css" href="main.css">
</head>

<body>
	<div class="page-header">
		<h1>Ian's EE Blog</h1>
		<h4>Keeping up to date with all of the zany things I do.</h4>
	</div>
	<nav class="container">
		<div class="row">
			<div class="col-md-1 col-sm-2">
				<a href="https://www.linkedin.com/in/ian-saltwick-23591b81"><img class="nav-bar-logo" src="logos/linkedin_logo.png"/>LinkedIn</a>
			</div>
			<div class="col-md-1 col-sm-2">
				<a href="https://www.facebook.com/ian.saltwick"><img class="nav-bar-logo" src="logos/facebook_logo.png"/>Facebook</a>
			</div>
			<div class="col-md-1 col-sm-2">
				<a href="https://github.com/iSalty"><img class="nav-bar-logo" src="logos/github_logo.png"/>GitHub</a>
			</div>
		</div>
	</nav>
	<section class="container">
		<div class="row">
			<div class="col-sm-2">
				<img class="user-img" src="http://images.clipartpanda.com/hercules-clip-art-hercules001.gif"/>
				<h5 class="author">iSaltwick</h5> 
				<h5 class="post-date">August 20, 2016</h5>
			</div>
			<div class="col-md-8 col-sm-10">
				<h3 class="post-title">About This Site</h3>
				<p class="post-text"> 
					Hi, I am a recent graduate from Arizona State University in the field of Electrical Engineering. I have been involved in a few noteworthy projects during my time in college and would love to continue tinkering and inventing on my own time. I intend for this to be the site where others can come to see what projects I have been working on and my thought process throughout the time that I was involved in those projects. 
				</p>
				<p class="post-text">
					I am putting together this website to serve as a platform to share the many fun and interesting projects I am working on and to serve as some sort of a portfolio of my projects. Building this website was a project in itself. Never before have I had any experience with web design and I wanted to learn how to make a website essentially only using the barebones HTML and CSS code. So I headed over to <a href="https://www.codecademy.com/learn" target="_blank"> codecademy.com</a> and spent a day learning HTML, CSS and the bootstrap framework in the Making a Website course. I spent another day scouring the internet to find inspiration on the asthetic of the website. Finally, I spent one day sitting down and coding the thing. It surprised me just how quickly I picked it up and I really ended up enjoying it. Having complete control over the layout (down to the pixel) and being able to see the changes with a simple refresh was a very exciting way to make progress. Nevertheless, this is the result, the page you are looking at and interacting with. It is my first experience with web design and, I have to say, I am quite pleased with the results. You can find the code for this website on <a href="https://github.com/iSalty/iSalty.github.io" target="_blank">my GitHub page</a> if you are interested. Hopefully this blog proves to be as much fun to read as it is for me to create and update.  
				</p>
			</div>
		</div>
		<!-- End of About this site Post -->

		<hr style="width: 100%; color: #222; height: 1px; background-color:#444;"/>
		
		<!-- LED Bike Wheel Post # 1 -->
		<div class="row">
			<div class="col-sm-2">
				<img class="user-img" src="http://images.clipartpanda.com/hercules-clip-art-hercules001.gif"/>
				<h5 class="author">iSaltwick</h5> 
				<h5 class="post-date">August 21, 2016</h5>
			</div>
			<div class="col-md-8 col-sm-10">
				<h3 class="post-title">LED Bike Wheel: 1</h3>
				<p class="post-text">
					The 'LED Bike Wheel' was the title of my senior design project from Arizona State University. It was completed over the last year of school with two of my good buddies from college, Matthew Jackson and Cameron Mahai. It was the last project that I worked on in college and would love to highlight it here because it was such a fun and interesting project. 
				</p>
				<p class="post-text">
					Living in Tempe (one of the most bikeable cities in the US) we encountered many bikes in our daily lives. It was how all three of us (Matt, Cameron, and myself) commuted to campus and back everyday of the week. Bikes, being so central to our daily lives, were at the forefront of our thoughts when it came time to pick a project topic in the Fall of 2015. We had all seen people attempt to put lights on their bikes, but most were just sad strands of LEDs that just went about, producing nothing but a wiggly circle. We wanted take that idea and kick it up a notch. 
				</p>
				<p class="post-text">
					Thus the idea was born that there could be static images displayed on the bike wheel as the bike was in motion using the physical phenomenon of Persistence of Vision. Persistence of Vision is the explanation of how the human eye to retains a discrete image of light for fractions of a second after it has gone. “Whenever light strikes the retina, the brain retains the impression of that light for about a tenth of a second…after the source of the light is removed. As a result, the eye cannot clearly distinguish fast changes in light that occur faster than this retention period.” <a href="http://www.foundationsmag.com/persistence_of_vision.html" target="_blank">[1]</a>. This phenomenon has inspired the creation of many technologies. It is at the core of how motion is perceived by us in movies or on television screens <a href="http://www.foundationsmag.com/persistence_of_vision.html" target="_blank">[1]</a>. The LED Bike Wheel would be able to utilize the sluggishness of the human eye and mind to not only create animation (using multiple frames in succession) but also to create the screen itself. In the assembly there would exists only a few pixels, but when spinning around at a fast enough rate each pixel is perceived by the mind as a solid circle. The color of any point on those circles can be controlled to produce the desired image. An illustration of POV as it relates to our bike display is shown below. 
				</p>
				<div>
					<img class="post-image" src="Pictures/paint of square to polar.png" height="400px" width="auto"/>
				</div>
				<p class="post-text">
					Each blue circle represents what our minds would see from a lit single pixel, rotating about the center faster than our brains could compensate. It is clear to see where in the rotation each LED would need to turn red in order to create the image of the red square, and it is the goal of this project to design a system to do so.
				</p>
			</div>
		</div>
		<!-- End of LED Bike Wheel Post # 1 -->

		<hr style="width: 100%; color: #222; height: 1px; background-color:#444;"/>
		
		<!-- LED Bike Wheel Post # 2 -->
		<div class="row">
			<div class="col-sm-2">
				<img class="user-img" src="http://images.clipartpanda.com/hercules-clip-art-hercules001.gif"/>
				<h5 class="author">iSaltwick</h5> 
				<h5 class="post-date">August 22, 2016</h5>
			</div>
			<div class="col-md-8 col-sm-10">
				<h3 class="post-title">LED Bike Wheel: 2</h3>
				<p class="post-text">
					Unsurprisingly, we were not the first people to think of this. However, the other similar projects which have been completed are fairly recent and our project has its own advantages. Here are a couple of products / projects similar to ours worth checking out.
				</p>
				<ul class="post-bullets">
					<li><a href="http://www.monkeylectric.com/monkey_light_pro/" target="_blank">MonkeyLectric's Monkey Light Pro</a></li>
					<li><a href="" target="_blank">Some other project</a></li>
				</ul>
				<p class="post-text">
					The MonkeyLectric one is really quite impressive with the quality of the images they are able to recreate. Nevertheless, they have encountered some problems which we have improved upon. MonkeyLectric's product uses Bluetooth to transfer the images from a phone (only iOs at the moment) and does the image processing on the phone as well. After looking through the MonkeyLectric forums we identified that the Bluetooth transfer rate was slow and the processing on phone would drain people's battery and even cause some heat problems. Therefore we elected to have our device work over WiFi (capable of recieving transfers from any internet connected device) and to do the necessary image processing on the bike wheel assembly. Knowing that we needed a pretty powerful system we elected to go with a Raspberry Pi 2: Model B+. It has an ARM compatible CPU which has a clock rate of 900MHz which we could then easily overclock to 1000MHz and is trivial to connect to WiFi (using a $5 WiFi dongle).
				</p>
			</div>
		</div>
		<!-- End of LED Bike Wheel Post # 2 -->

		<hr style="width: 100%; color: #222; height: 1px; background-color:#444;"/>
		
		<!-- LED Bike Wheel Post # 3 -->
		<div class="row">
			<div class="col-sm-2">
				<img class="user-img" src="http://images.clipartpanda.com/hercules-clip-art-hercules001.gif"/>
				<h5 class="author">iSaltwick</h5> 
				<h5 class="post-date">August 23, 2016</h5>
			</div>
			<div class="col-md-8 col-sm-10">
				<h3 class="post-title">LED Bike Wheel: 3</h3>
				<p class="post-text">
					Now that we had decided what the product was supposed to be and do, it was time to get to work on actually prototyping it. First up was learning how to work with the Raspberry Pi. It was the first time any of us had worked with microcontrollers like this, fortunatley, the RPi is what is termed a microcomputer. Basically it is a fully functional computer, just miniaturized, complete with a GUI for the desktop and file system. We utilized the Raspbian Jessie operating system which is built on Linux. Therefore, eventhough it has a fully function GUI, it was still beneficial to learn how to work within the command line because of how useful it is on Linux platforms. 
				</p>
				<p class="post-text">
					After fimiliarizing myself with the command line I decided that I wanted to write my first program on the RPi and have it light up some LEDs. The Raspberry Pi has great built in functionality with Python programs and therefore Python was the language of choice when writing most of my programs. Again, I had some learning to do because I had never written a program in Python. I did, however, have a good working knowledge of C++ so it came to me quick. Using these <a href="https://www.adafruit.com/products/302?gclid=Cj0KEQjw6O-9BRDjhYXH2bOb8Z4BEiQAWRdukxl-JQYDdKpD95jpF_yId-9EI2LiMlpYy1B5FyyQqVoaAvEP8P8HAQ" target="_blank">common anode RGB LEDs</a> I purchased from Adafruit and some resistors I had lying around I was able to quickly whip up <a href="https://github.com/iSalty/LED-Bike-Wheel/blob/master/drive-download-20160823T233046Z/colorFunc.py" target="_blank">this program</a>. The program changes the colors of two LEDs simply by controlling specific GPIO pins to be on or off. A video of the program running can be seen below.
				</p>
				<div class="post-video">
					<iframe width="420" height="315" src="https://www.youtube.com/embed/B8FuRu6dYN0" frameborder="0" allowfullscreen></iframe>
				</div>
			</div>
		</div>
		<!-- End of LED Bike Wheel Post # 3 -->

		<hr style="width: 100%; color: #222; height: 1px; background-color:#444;"/>

		<!-- LED Bike Wheel Post # 4 -->
		<div class="row">
			<div class="col-sm-2">
				<img class="user-img" src="http://images.clipartpanda.com/hercules-clip-art-hercules001.gif"/>
				<h5 class="author">iSaltwick</h5> 
				<h5 class="post-date">August 24, 2016</h5>
			</div>
			<div class="col-md-8 col-sm-10">
				<h3 class="post-title">LED Bike Wheel: 4</h3>
				<p class="post-text">
					I had shown that the LEDs could be controlled simply through the Raspberry Pi's GPIO pins. However, we wanted a lot of LEDs on our bike wheel (48 to be exact) and there simply were not enough GPIO pins on the RPi to accomodate that number of LEDs. After some research we elected to go with adding GPIO expander chips from Microchip (the MCP23S17) which would add 16 GPIO ports per chip. In theory the RPi could accomodate adding up to 16 MCP23S17s, we ended up using 12. 
				</p>
				<p class="post-text">
					The reason we needed so many extra ports was because each individual RGB LED required 4 GPIO pins to be controlled. The four pins would control the Red, Green, and Blue pins, as well as Power to the LED. Below, you can see a pin diagram the RGB LEDs we used and the scheme used to hook them up to the MCP2317s to be controlled.   
				</p>
				<div>
					<img class="post-image" src="Pictures/rgbLED_MCP.png"/>
				</div>
				<p class="post-text">
					Because the LEDs used in this assembly are common anode, 5v is put into the common anode and the current flows through wherever there is a voltage differential. Consequently, it runs backwards, in a sense. For example, if Red was the desired color of the LED, the pins would have to be controlled in the following way, [B:1, G:1, R:0, Pow:1]. This way there is only a voltage difference between the voltage input (anode) and the desired return path, red; thus, the LED turns red. 
				</p>
				<p class="post-text">
					The MCP23S17 also added the functionality of being able to write to it a whole byte at a time. This allows us to control one side (2 LEDs)of the MCP23S17 with a single write command. Thus defining the colors as hexadecimal values would make the process of doing this much easier. A table of the colors and their equivalent Hex values is shown below. This will come in handy later when we examine the code that conducts the LEDs during runtime. 
				</p>
				<p class="col-sm-offset-1 col-md-offset-3" style="font-size: 1.4rem">
						K = Black, W = White, R = Red, G = Green, B = Blue, Y = Yellow, P = Purple, C = Cyan
				</p>
				<div class="col-sm-12 col-lg-offset-2 col-lg-8">
					<img class="post-image" src="Pictures/4.2.2.2.png" width="100%"/>
				</div>
			</div>
		</div>
		<!-- End of LED Bike Wheel Post # 4 -->

		<hr style="width: 100%; color: #222; height: 1px; background-color:#444;"/>
		
		<!-- LED Bike Wheel Post # 5 -->
		<div class="row">
			<div class="col-sm-2">
				<img class="user-img" src="http://images.clipartpanda.com/hercules-clip-art-hercules001.gif"/>
				<h5 class="author">iSaltwick</h5> 
				<h5 class="post-date">August 25, 2016</h5>
			</div>
			<div class="col-md-8 col-sm-10">
				<h3 class="post-title">LED Bike Wheel: 5</h3>
				<p class="post-text">
					It took some time to figure out how to properly talk to the MCP23S17 chips in the code but one specific library was my saving grace, <a href="http://wiringpi.com/" target="_blank">wiringPi</a> by drogon. This specific library has a lot of built in functionality for interfacing with some chips commonly used with the RPi. It provided a simple way to conduct the MCP23S17 chips over the SPI interface.
				</p>
				<p class="post-text">
					Anyway, once I was able to figure out how to work with 4 LEDs connected to one of the MCP23S17 chips it became apparent how we were going to be able to scale up to deal with 48 LEDs. Initially we wanted to design the device to be on Printed Circuit Boards. However, when looking into the moetary cost and, even more importantly, the time cost to have them made and shipped to us we realized that going down this route would leave us with little wiggle room if something were to go wrong. Therefore, we elected to design the product on <a href="https://www.adafruit.com/product/591" target="_blank">solderable breadboards</a>, specialized for prototyping. The solderable breadboards would give us the most flexibility if we made a mistake and were also significantly cheaper than doing the layout on a printed circuit board. The solderable breadboard layout I came up with can be seen below.  
				</p>
				<div>
					<img class="post-image" src="Pictures/SolderableBreadboardLayout.png" height="400px"/>
				</div>
				<p class="post-text">
					As you can see in the diagram above, there would be four boards making up the LED Bike Wheel assembly. Each board contains 12 LEDs and the chips needed to control them as well as the appropriate resistors (all 1k&#937). At the top of each board is a Hall effect sensor which is responsible for keeping track of the rate of rotation of the wheel and will be talked about more in a later post.
				</p>
			</div>
		</div>
		<!-- End of LED Bike Wheel Post # 5 -->

		<hr style="width: 100%; color: #222; height: 1px; background-color:#444;"/>
		
		<!-- LED Bike Wheel Post # 6 -->
		<div class="row">
			<div class="col-sm-2">
				<img class="user-img" src="http://images.clipartpanda.com/hercules-clip-art-hercules001.gif"/>
				<h5 class="author">iSaltwick</h5> 
				<h5 class="post-date">August 26, 2016</h5>
			</div>
			<div class="col-md-8 col-sm-10">
				<h3 class="post-title">LED Bike Wheel: 6</h3>
				<p class="post-text">
					So we got to work assembling the boards seen in the above diagrams. Because we elected to create our assembly on solderable breadboards we had a considerable amount of soldering ahead of us. None of us had extensive experience soldering before, but by the end of it we were all experts. Each board took around 2-3 hours of soldering to complete and plenty of errors had to be corrected. Our first complete board can be seen in the images below (top = front) (bottom = back). 
				</p>
				<div class="post-image">
					<img src="Pictures/StickAssembly_Front.png" width="100%"/>
				</div>
				<div class="post-image">
					<img src="Pictures/StickAssembly_Back.png" width="100%"/>
				</div>
				<p class="post-text">
					You can see what a mess the wires were on the back of the board, thus the back of the LED Bike Wheel assembly came to be known as the "rat's nest". However, we didn't want the loose wires to get caught on the bike as it was in motion so we took care to neatly zip-tie them to each other as well as to the spokes of the bike wheel (this can be seen in a later post with the full assembly on the bike). 
				</p>
				<p class="post-text">
					Now that the actual hardware portion of the build was complete it was time to focus on the software. The software would handle how to coordinate all 48 LEDs in order to generate a standing image on the bike wheel. But first things first, we just wanted to see if our hack job of a hardware prototype could light up. I had written <a href="https://github.com/iSalty/LED-Bike-Wheel/blob/master/drive-download-20160823T233046Z/rainbow.py" target="_blank">some code here</a> in which I could specify the colors of 12 LEDs and it was finally time to test it out. Unsurprisingly, on the first try, nothing happened. After checking the wiring with a digital multimeter, swapping out a few resistors, and resoldering some wires we were able to get it working. Below you can see an image of all 12 LEDs lighting up in a rainbow fashion.
				</p>
				<div class="post-image">
					<img src="Pictures/boardAssembleLit.jpg" width="100%"/>
				</div>
			</div>
		</div>
		<!-- End of LED Bike Wheel Post # 6 -->

	</section>
	<footer class="container">
  		<div class="row">
      		<p class="col-sm-4" style="color:#cccccc">
        	&copy; 2016 iSalty
      		</p>
      		<ul class="col-sm-8">
        		<a href="https://www.linkedin.com/in/ian-saltwick-23591b81"><li class="col-sm-1" target="_blank"> <img src="logos/linkedin_footer_logo.png"></li></a>
        		<a href="https://www.facebook.com/ian.saltwick" target="_blank"><li class="col-sm-1"> <img src="logos/facebook_footer_logo.gif"></li></a>
        		<a href="https://github.com/iSalty" target="_blank"><li class="col-sm-1"> <img src="http://www.iconsdb.com/icons/preview/gray/github-10-xxl.png"></li></a>
      		</ul>
    	</div>
  	</footer>
</body>
</html>